@{
    ViewBag.Title = "Index";
}
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

		<title>CustomerOrder</title>
		<meta name="description" content="" />
		<meta name="author" content="ngocanh" />		
        <link rel="shortcut icon" href="/favicon.ico" />
		<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
		 <link href="css/bootstrap.css" rel="stylesheet"/>
	    <script src="/js/jquery-1.7.2.min.js" type="text/javascript"></script>
        <script src="/js/jquery-ui.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="/js/jquery.cookie.js"></script>
        <script type="text/javascript" src="/js/jquery.mousewheel.min.js"></script>        
        <script type="text/javascript"src="http://maps.googleapis.com/maps/api/js?sensor=false&language=vi"></script>
		<script src="/js/jquery.gomap-1.3.2-edited.js" type="text/javascript"></script>
        <script src="/js/map-helper.js" type="text/javascript"></script>
        <link rel="stylesheet" type="text/css" href="/css/DT_bootstrap.css" />
        <script src="/js/chosen.jquery.js" type="text/javascript"></script>
        <script src="/js/collection-plan-request-ticket.js" type="text/javascript"></script>
        <script src="/js/date.format.js" type="text/javascript"></script>         
        <script type="text/javascript">
           
            function chMd() {
                for (var i = 0; i < document.forms[0].elements.length; i++) {
                    if (document.forms[0].elements[i].name == "optionsRadios") {
                        if (document.forms[0].elements[i].value == "option1") {
                            if (document.forms[0].elements[i].checked == true) {
                                $('#ddlHubCategories').prop('disabled', true);
                                $('#ddlHub').prop('disabled', true);               
                            }
                        }
                        else if (document.forms[0].elements[i].value == "option2") {
                            if (document.forms[0].elements[i].checked == true) {
                                $('#ddlHubCategories').prop('disabled', false);
                                $('#ddlHub').prop('disabled', false); 
                            }
                        }                    
                    }
                }
            }
</script> 
<script type="text/javascript">        

    var goMap;
    var currentHub;
    var currentHouse;
    function initialize() {
        var myLatlng = new google.maps.LatLng(10.776198, 106.632982);
        var myOptions = {
            zoom: 16,
            center: myLatlng,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        }
        goMap = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
        // Biến text chứa nội dung sẽ được hiển thị
        var text;

        var infowindow = new google.maps.InfoWindow(
        { content: text,
        size: new google.maps.Size(100, 50),
        position: myLatlng
        });
        infowindow.open(map);

    }

    function addMarkerHouse(lat, long) {
        var myLatLng = new google.maps.LatLng(lat, long);
        currentHouse = new google.maps.Marker(
        {
            position: myLatLng,
            map: map, title: "House"
        });
    }

    function addMarkerHub(lat, long)
    {
        var myLatLng = new google.maps.LatLng(lat, long);
        currentHub = new google.maps.Marker(
        {
            position: myLatLng,
            map: map, title: "Hub"
        });
    }

    function removeMarkerHouse() {
        currentHouse = null;
    }

    function removeMarkerHub() {
        currentHub = null;
    }

    function getLatLong(address) {
        var geo = new google.maps.Geocoder;

        geo.geocode({ 'address': address }, function (results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                return results[0].geometry.location;
            } else {
                alert("Geocode was not successful for the following reason: " + status);
            }

        });

    }

</script>

  
         <script type="text/javascript">
             var deleteItemManagement = function (itemID) {
                 bootbox.confirm("Are you sure to cancel this request?", function (result) {
                     if (result) {
                         $.post('/Customer/ItemManagement/Remove/' + itemID, function (result) {
                             if (result.success) {
                                 $.blockUI();
                                 window.location.reload();
                             } else {
                                 bootbox.alert('Failed to cancel this request.');
                             }
                         });
                     }
                 });
             };
</script>
<style type="text/css">
			#noi_dung{
				position: absolute;
				background-color: white;
				visibility: hidden;
				z-index: 100;
				border: 1px ridge #0000FF;
				padding: 10px;
				width: 500px;
				text-align: justify;
				}
				
				#wrapper { 

                width: 1028px;
                height:768; 

                margin: 0 auto; 

                text-align: left; 

                } 
		</style>
        <style type="text/css">
			.scrollArea{
				width: 470px; 
height: 450px;
padding-left: 0px;
padding-right: 0px; 

border-width: 0px; 
border-style: solid;
float: left; 
overflow: auto;
			}
		</style>
			<script type="text/javascript">
			    var totalPrice = 0;
			    function DiChuyen(iamgeUrl, des) {
			        $('#noi_dung img').attr('src', iamgeUrl);
			        $('#noi_dung .des').text(des);
			        e = window.even || event;
			        s = document.getElementById("noi_dung");

			        s.style.top = e.clientY + 'px';
			        s.style.visibility = 'visible';
			        //document.title = e.clientX + ':' + e.clientY;
			    }
			    function addCart(tag) {
			        var tem = $(tag).parent().parent();
			        var inputFiled = tem.children("td").children("input");
			        var quantity = inputFiled.val();
			        if (!is_numeric(quantity)) {
			            alert("Quantity must be a number !!!");
			            inputFiled.focus();
			            return;
			        }
			        if (quantity > 100) {
			            alert("Quantity must be less than 100!!!");
			            inputFiled.focus();
			            return;
			        }
			        if (quantity <= 0) {
			            alert("Quantity must be positive integer!!!");
			            inputFiled.focus();
			            return;
                    }
			        var textHtml = '<tr align="center" class="buy_tr"><input class="input-mini" style="text-align:right" type="hidden" value="' +
                    tem.children("input[type=hidden]").val() +
                     '"/><td>' + tem.children("td").eq(1).text() + '</td><td style="text-align:right">' + tem.children("td").eq(2).text() +
                    '</td><td style="text-align:right">' +
                    tem.children("td").children("input[type=text]").val() +
				'</td><td style="text-align:right">' + tem.children("td").eq(2).text() * tem.children("td").children("input").val() +
                '</td><td><button class="btn btn-danger" onclick="removeCart(this)" type="button">Remove</button></td></tr>';
			        $('#tblAddCart tbody').append(textHtml);
			        totalPrice += tem.children("td").eq(2).text() * tem.children("td").children("input").val();
			        $('#totalPrice').val(totalPrice);
			        // alert($(tag).parent().parent().prop("tagName"))
			    }
			    function removeCart(tag) {
			        var tem = $(tag).parent().parent();
			        tem.remove();
			    }
			    function is_numeric(input) {
			        return !isNaN(input);
			    }
                function checkPhone(tag){
                    var tem = $(tag);
                    var patt1 = /^\d{10,13}$/;
                   // alert($(tag).val());
                    if (!patt1.test($(tag).val())) {
                        alert("invalid!Phone must be number!!!");
                        $(tag).focus();
                    }
                }
                function checkEmail(tag) {
//                    var tem = $(tag);
//                    var patt1 = 
//                    // alert($(tag).val());
//                    if (!patt1.test($(tag).val())) {
//                        alert("sai");
//                        $(tag).focus();
//                    }
                }
			    $('#btnBuy').live("click", function () {
			        var buyArray = new Array();
			        $('.buy_tr').each(function (index) {
			            var itemArray = new Array();
			            itemArray.push($(this).children("input[type=hidden]").val());
			            itemArray.push($(this).children("td").children("input[type=text]").val());
			            buyArray.push(itemArray);
			        });
			        $.post('/CustomerOrder/Add', {
			            buyArray: buyArray
			        }, function (result) {

			        });
			    });


			</script>
	</head>
	<body onload="initialize()">
		 
		<div id="wrapper">
			
			<div style=" float:left;margin-top:20px;">
				<img src="" width="100px" height="150px"/>
				<p style="margin-left: 150px;margin-top:-65px;"><b>ADIDAS Viet Nam</b> </br>Chuyen Ban Dung Cu The Thao</br>Tel:088888888</p>
			</div>
			
		<p>
		<div id="noi_dung" style="margin-left: 60px;margin-top: -10px;"> 
			<img src="" width="200px" height="200px"/><br/><div class="des"></div>
</div>
		</p>
		
		
		<div  class="bs-docs-example" style="float:left;width: 500px;margin-left: -350px;margin-top: 120px;">
			<legend style="font-weight:bold;color:blue;"><a name="BM2">Menu</a></legend>
            <span class="scrollArea">
            <table class="table table-striped">
            	<thead>
            	<tr>
                  <th></th>
                  <th>Name</th>
                  <th>Price</th>
                  <th>Quantity</th>
                  <th></th>
                </tr>
                </thead>
		<tbody>         
        @foreach(var item in Model){
            string itemNo = "itemNo" + item.ProductId;
            <tr align="center">
            <input class="input-mini" style="text-align:right" type="hidden" value="@item.ProductId"/>
				<td>                    @if (item.ImageURL == null)
                    {
                        @:None
                    }
                    else
                    {
                        
                    }</td>
				<td>@item.Name</td><td style="text-align:right">@item.ProductPrice</td>
				<td>
					<input class="input-mini" style="text-align:right" type="text" value="1" id="@itemNo"/>
				</td>
				<td><button class="btn btn-info" type="button" onclick="addCart(this)">Add</button></td>
			</tr>
        }
       
			</tbody>
		</table>
         </span>
		</div><br/>
		<div style="float:right;width: 510px;margin-top: 50px;">
@*		<form class="form-horizontal">
  <div class="control-group">
    <label class="control-label" for="totalPrice">Total Price :</label>
    </div>
    <div class="controls">
      <input class="input-medium" type="text" id="totalPrice" value="" style="text-align:right">     
  </div> 
		</form>*@
        <div >
    Total Price :&nbsp;&nbsp;&nbsp;<input class="input-medium" type="text" id="totalPrice" value="" style="text-align:right;margin-top:10px;" disabled="disabled"><a href="#BM1" class="btn btn-link" type="button">Go to Customer Info</a>
   
  </div>
		</div><div style="float:left;width: 510px;margin-top:1px;">
       
		<legend style="font-weight:bold;color:blue;">Cart Add</legend>
         <span class="scrollArea"> 
		<table class="table table-striped" id="tblAddCart" cellpadding="0px">
			<thead>
			<tr>
                  <th>Name</th>
                  <th>Price</th>
                  <th>Quantity</th>
                  <th>Amount</th>
                  <th></th>
            </tr>
            </thead>
            <tbody>
            </tbody>
		</table>

		</span>
		</div>
        <div>
			<legend style="font-weight:bold;color:blue;"><a name="BM1">Customer Infor</a></legend>
			<form class="form-horizontal">
				<div class="control-group">
    <label class="control-label" for="name">Name</label>
    <div class="controls">
      <input type="text" id="name">
    </div>
  </div>
  <div class="control-group">
    <label class="control-label" for="phone1">Phone 1</label>
    <div class="controls">
      <input type="text" id="phone1" onchange="checkPhone(this)">
    </div>
  </div>
  <div class="control-group">
    <label class="control-label" for="phone2">Phone 2</label>
    <div class="controls">
      <input type="text" id="phone2" onchange="checkPhone(this)">
    </div>
  </div>
  <div class="control-group">
    <label class="control-label" for="inputEmail">Email</label>
    <div class="controls">
      <input class="span3" type="text" id="inputEmail" placeholder="A@gmail.com" onchange="checkEmail(this)">
    </div>
    </div>
    <div class="control-group">
    <label class="control-label" for="city">City</label>
    <div class="controls">
          @Html.DropDownList("CityProvinceId", ViewBag.City as SelectList, "-- Choose a City or Province --", new { id = "ddlCityProvince", Class = "chzn-select" })
      </div>
  </div>
  <div class="control-group">
    <label class="control-label" for="district">District</label>
     <div class="controls">
          @Html.DropDownList("DistrictId", ViewBag.District as SelectList, "-- Choose a District --", new { id = "ddlDistrict", Class = "chzn-select" })
      </div>
  </div>
  <div class="control-group">
    <label class="control-label" for="ward">Ward</label>
    <div class="controls">
     @Html.DropDownList("Ward", ViewBag.Ward as SelectList, "-- Choose a Ward --", new { id = "ddlWard", Class = "chzn-select" })
  </div>   
  </div>
  <form>
  <div>
 <label class="radio inline">
  <input type="radio" name="optionsRadios" onClick="chMd()" id="optionsRadios1" value="option1" >
 Direct Delivery
</label>
<label class="radio inline">
  <input type="radio" name="optionsRadios" onClick="chMd()" id="optionsRadios2" value="option2" checked>
 Buffer Delivery
</label>
</div>
  <div class="control-group">
    <label class="control-label" for="address">Address</label>
    <div class="controls">
      <input name="address  " type="text" id="address"/>
    </div>
  </div>
  <div class="control-group" name="">
    <label class="control-label" for="allHubs"></label>
   
      <div class="controls">
          @Html.DropDownList("HubCategory", ViewBag.HubCategories as SelectList, "-- Choose a Hub Type --", new { id = "ddlHubCategories", Class = "chzn-select" })
      </div>
    
  </div>
  <div class="control-group" >
    <label class="control-label" for="aroundHubs">Around Hubs</label>
    
    <div class="controls" >
         @Html.DropDownList("Hub", ViewBag.Hubs as SelectList, "-- Choose a Hub --", new { id = "ddlHub", Class = "chzn-select" })
    </div>
  
  </div>
  </form>
  <div style="margin-left: 160px;">
  <form class="form-inline">
  	<button type="button" class="btn-success">OK</button>
  	<button type="button" class=" btn-warning">Cancel</button>
  	<a href="#BM2" class="btn btn-link" type="button">Go to Menu</a>
  </form>
  </div>
			</form>
		</div>
		</div>
		@*<div id="map_canvas" style="height:700px; width:600px;float:left;margin-top: -700px;margin-left: 750px;"></div>*@
        </div>
	<script>

	    $("#ddlHubCategories").change(function () {
	        var items = '<option value="-1">-- All Locations --</option>';
	        $('#ddlHub').html(items);
	        $('#ddlHub').trigger("change");
	        var id = $('#ddlHubCategories option:selected').val();
	        if (id == '') id = -1;
	        $.getJSON('/HubCategories/GetHubsByHubCategory/' + id, function (data) {
	            items = '<option value="-1">-- All Locagions --</option>';
	            $.each(data, function (i, hub) {
	                items += "<option value='" + hub.HubId + "'>" + hub.Name + "</option>";
	            });
	            $('#ddlHub').html(items);
	            $('#ddlHub').trigger("liszt:updated");
	        });
	    });

       $("#ddlHub").change(function () {
            
       }


    </script>	
	</body>
    
</html>

