@model IEnumerable<HDMS.Models.UserViewModel>
@{
    ViewBag.Title = "Index";
}
@if (false)
{ 
    <script src="/js/jquery-1.7.2-vsdoc.js" type="text/javascript"></script>
}
<link rel="stylesheet" type="text/css" href="/css/DT_bootstrap.css" />
<link href="/css/dataTables.bootstrap.css" rel="stylesheet" type="text/css" />
<script src="/js/jquery.dataTables.js" type="text/javascript"></script>
<script type="text/javascript" charset="utf-8" language="javascript" src="/js/DT_bootstrap.js"></script>
<script src="/js/dataTables.bootstrap.js" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="/js/crud.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        setupDataTable('Account');
        $("div.tblBtnGroup").html('<a href="#createModal" role="button" data-toggle="modal" class="btn DTTT_button_text btn-success" id="btnNew"><span>Add</span></a>');
    });
</script>
<div class="row-fluid">
    <div class="span12 breadcrumb">
        <h3>
            Accounts</h3>
    </div>
</div>
<table class="table table-striped table-bordered" id="main-table">
    <thead>
        <tr>
            @*<th class="hide">
                User Id
            </th>*@
            <th>
                User Name
            </th>
            <th>
                Email
            </th>
            @*<th>
                Office staff
            </th>
            <th>
                Delivery
            </th>*@
            <th class="tbl-action-col">
                Action
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                @*<td class="hide">
                    @item.CustomerId
                </td>*@
                <td>
                    @item.UserName
                </td>
                <td>
                    @item.Email
                </td>
                @*<th>
                    @(item.UserInfo.
                </th>
                <th>
                    Delivery
                </th>*@ @*<td>
                    @item.Note
                </td>*@
                <td class="center">
                    <a class="resetPassword" href="#">
                        <input type="submit" value="Reset Password" />
                    </a>
                </td>
            </tr>
        }
    </tbody>
</table>
<script>
    $(".resetPassword").click(function () {
        var currentNode = $(this);
        var myData = { username: $(this).closest('tr').find("td:first").html().trim() },
                        json = JSON.stringify(myData);
        $.ajax({
            url: 'ResetPassword',
            type: 'POST',
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            data: json,
            success: function (result) {
                alert("success");
            }
        });
    });
</script>
